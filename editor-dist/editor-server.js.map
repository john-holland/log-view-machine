{"version":3,"file":"editor-server.js","sources":["../src/core/Tracing.ts","../src/core/RobotCopy.ts","../node_modules/@opentelemetry/api/build/esm/trace/status.js","../src/opentelemetry-setup.ts","../src/editor-server.ts"],"sourcesContent":["export interface MessageMetadata {\n  messageId: string;\n  traceId: string;\n  spanId: string;\n  timestamp: string;\n  backend: 'kotlin' | 'node';\n  action: string;\n  data?: any;\n}\n\nexport interface TraceInfo {\n  traceId: string;\n  messages: MessageMetadata[];\n  startTime?: string;\n  endTime?: string;\n  backend?: 'kotlin' | 'node';\n}\n\nexport class Tracing {\n  private messageHistory: Map<string, MessageMetadata> = new Map();\n  private traceMap: Map<string, string[]> = new Map();\n\n  generateMessageId(): string {\n    return `msg_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  generateTraceId(): string {\n    return `trace_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  generateSpanId(): string {\n    return `span_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  trackMessage(messageId: string, traceId: string, spanId: string, metadata: Partial<MessageMetadata>): MessageMetadata {\n    const message: MessageMetadata = {\n      messageId,\n      traceId,\n      spanId,\n      timestamp: new Date().toISOString(),\n      backend: metadata.backend || 'node',\n      action: metadata.action || 'unknown',\n      data: metadata.data,\n    };\n\n    this.messageHistory.set(messageId, message);\n\n    if (!this.traceMap.has(traceId)) {\n      this.traceMap.set(traceId, []);\n    }\n    this.traceMap.get(traceId)!.push(messageId);\n\n    return message;\n  }\n\n  getMessage(messageId: string): MessageMetadata | undefined {\n    return this.messageHistory.get(messageId);\n  }\n\n  getTraceMessages(traceId: string): MessageMetadata[] {\n    const messageIds = this.traceMap.get(traceId) || [];\n    return messageIds.map(id => this.messageHistory.get(id)).filter(Boolean) as MessageMetadata[];\n  }\n\n  getFullTrace(traceId: string): TraceInfo {\n    const messages = this.getTraceMessages(traceId);\n    return {\n      traceId,\n      messages,\n      startTime: messages[0]?.timestamp,\n      endTime: messages[messages.length - 1]?.timestamp,\n      backend: messages[0]?.backend,\n    };\n  }\n\n  getMessageHistory(): MessageMetadata[] {\n    return Array.from(this.messageHistory.values());\n  }\n\n  getTraceIds(): string[] {\n    return Array.from(this.traceMap.keys());\n  }\n\n  clearHistory(): void {\n    this.messageHistory.clear();\n    this.traceMap.clear();\n  }\n\n  // Create tracing headers for HTTP requests\n  createTracingHeaders(traceId: string, spanId: string, messageId: string, enableDataDog: boolean = false): Record<string, string> {\n    const headers: Record<string, string> = {\n      'x-trace-id': traceId,\n      'x-span-id': spanId,\n      'x-message-id': messageId,\n    };\n\n    if (enableDataDog) {\n      headers['x-datadog-trace-id'] = traceId;\n      headers['x-datadog-parent-id'] = spanId;\n      headers['x-datadog-sampling-priority'] = '1';\n    }\n\n    return headers;\n  }\n}\n\nexport function createTracing(): Tracing {\n  return new Tracing();\n} ","// ViewStateMachine import removed as it's not used\nimport { Tracing, createTracing, MessageMetadata } from './Tracing';\n\nexport interface RobotCopyConfig {\n  unleashUrl?: string;\n  unleashClientKey?: string;\n  unleashAppName?: string;\n  unleashEnvironment?: string;\n  kotlinBackendUrl?: string;\n  nodeBackendUrl?: string;\n  enableTracing?: boolean;\n  enableDataDog?: boolean;\n}\n\nexport class RobotCopy {\n  private config: RobotCopyConfig;\n  private tracing: Tracing;\n  private unleashToggles: Map<string, boolean> = new Map();\n  private machines: Map<string, { machine: any; config: any; registeredAt: string }> | undefined;\n\n  constructor(config: RobotCopyConfig = {}) {\n    this.config = {\n      unleashUrl: 'http://localhost:4242/api',\n      unleashClientKey: 'default:development.unleash-insecure-api-token',\n      unleashAppName: 'fish-burger-frontend',\n      unleashEnvironment: 'development',\n      kotlinBackendUrl: 'http://localhost:8080',\n      nodeBackendUrl: 'http://localhost:3001',\n      enableTracing: true,\n      enableDataDog: true,\n      ...config,\n    };\n\n    this.tracing = createTracing();\n    this.initializeUnleashToggles();\n  }\n\n  private async initializeUnleashToggles() {\n    // Simulate Unleash toggle initialization\n    // In real implementation, this would fetch from Unleash API\n    this.unleashToggles.set('fish-burger-kotlin-backend', false);\n    this.unleashToggles.set('fish-burger-node-backend', true);\n    this.unleashToggles.set('enable-tracing', true);\n    this.unleashToggles.set('enable-datadog', true);\n  }\n\n  async isEnabled(toggleName: string, _context: any = {}): Promise<boolean> {\n    return this.unleashToggles.get(toggleName) || false;\n  }\n\n  async getBackendUrl(): Promise<string> {\n    const useKotlin = await this.isEnabled('fish-burger-kotlin-backend');\n    return useKotlin ? this.config.kotlinBackendUrl! : this.config.nodeBackendUrl!;\n  }\n\n  async getBackendType(): Promise<'kotlin' | 'node'> {\n    const useKotlin = await this.isEnabled('fish-burger-kotlin-backend');\n    return useKotlin ? 'kotlin' : 'node';\n  }\n\n  generateMessageId(): string {\n    return this.tracing.generateMessageId();\n  }\n\n  generateTraceId(): string {\n    return this.tracing.generateTraceId();\n  }\n\n  generateSpanId(): string {\n    return this.tracing.generateSpanId();\n  }\n\n  trackMessage(messageId: string, traceId: string, spanId: string, metadata: Partial<MessageMetadata>): MessageMetadata {\n    return this.tracing.trackMessage(messageId, traceId, spanId, metadata);\n  }\n\n  getMessage(messageId: string): MessageMetadata | undefined {\n    return this.tracing.getMessage(messageId);\n  }\n\n  getTraceMessages(traceId: string): MessageMetadata[] {\n    return this.tracing.getTraceMessages(traceId);\n  }\n\n  getFullTrace(traceId: string) {\n    return this.tracing.getFullTrace(traceId);\n  }\n\n  async sendMessage(action: string, data: any = {}): Promise<any> {\n    const messageId = this.generateMessageId();\n    const traceId = this.generateTraceId();\n    const spanId = this.generateSpanId();\n    const backend = await this.getBackendType();\n    const backendUrl = await this.getBackendUrl();\n\n    // Track the message\n    this.trackMessage(messageId, traceId, spanId, {\n      backend,\n      action,\n      data,\n    });\n\n    // Prepare headers for tracing\n    const headers: Record<string, string> = {\n      'Content-Type': 'application/json',\n      ...this.tracing.createTracingHeaders(traceId, spanId, messageId, await this.isEnabled('enable-datadog')),\n    };\n\n    try {\n      const response = await fetch(`${backendUrl}/api/fish-burger/${action}`, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify({\n          ...data,\n          messageId,\n          traceId,\n          spanId,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n      \n      // Track the response\n      this.trackMessage(\n        `${messageId}_response`,\n        traceId,\n        spanId,\n        {\n          backend,\n          action: `${action}_response`,\n          data: result,\n        }\n      );\n\n      return result;\n    } catch (error) {\n      // Track the error\n      this.trackMessage(\n        `${messageId}_error`,\n        traceId,\n        spanId,\n        {\n          backend,\n          action: `${action}_error`,\n          data: { error: error instanceof Error ? error.message : String(error) },\n        }\n      );\n\n      throw error;\n    }\n  }\n\n  async startCooking(orderId: string, ingredients: string[]): Promise<any> {\n    return this.sendMessage('start', { orderId, ingredients });\n  }\n\n  async updateProgress(orderId: string, cookingTime: number, temperature: number): Promise<any> {\n    return this.sendMessage('progress', { orderId, cookingTime, temperature });\n  }\n\n  async completeCooking(orderId: string): Promise<any> {\n    return this.sendMessage('complete', { orderId });\n  }\n\n  // Integration with ViewStateMachine\n  integrateWithViewStateMachine(viewStateMachine: any): RobotCopy {\n    // Register message handlers for ViewStateMachine\n    viewStateMachine.registerRobotCopyHandler('START_COOKING', async (message: any) => {\n      return this.startCooking(message.orderId, message.ingredients);\n    });\n\n    viewStateMachine.registerRobotCopyHandler('UPDATE_PROGRESS', async (message: any) => {\n      return this.updateProgress(message.orderId, message.cookingTime, message.temperature);\n    });\n\n    viewStateMachine.registerRobotCopyHandler('COMPLETE_COOKING', async (message: any) => {\n      return this.completeCooking(message.orderId);\n    });\n\n    return this;\n  }\n\n  async getTrace(traceId: string): Promise<any> {\n    const backendUrl = await this.getBackendUrl();\n\n    try {\n      const response = await fetch(`${backendUrl}/api/trace/${traceId}`);\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error(`Failed to get trace ${traceId}:`, error);\n      return this.getFullTrace(traceId);\n    }\n  }\n\n  async getMessageFromBackend(messageId: string): Promise<any> {\n    const backendUrl = await this.getBackendUrl();\n\n    try {\n      const response = await fetch(`${backendUrl}/api/message/${messageId}`);\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error(`Failed to get message ${messageId}:`, error);\n      return this.getMessage(messageId);\n    }\n  }\n\n\n\n  // Debugging and monitoring methods\n  getMessageHistory(): MessageMetadata[] {\n    return this.tracing.getMessageHistory();\n  }\n\n  getTraceIds(): string[] {\n    return this.tracing.getTraceIds();\n  }\n\n  clearHistory(): void {\n    this.tracing.clearHistory();\n  }\n\n  // Configuration methods\n  updateConfig(newConfig: Partial<RobotCopyConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n  }\n\n  getConfig(): RobotCopyConfig {\n    return { ...this.config };\n  }\n\n  // Response handling\n  private responseHandlers: Map<string, (response: any) => void> = new Map();\n\n  onResponse(channel: string, handler: (response: any) => void): void {\n    // Store the handler for the specified channel\n    this.responseHandlers.set(channel, handler);\n    console.log(`Registered response handler for channel: ${channel}`);\n  }\n\n  // Method to trigger response handlers (for testing or manual triggering)\n  triggerResponse(channel: string, response: any): void {\n    const handler = this.responseHandlers.get(channel);\n    if (handler) {\n      console.log(`Triggering response handler for channel: ${channel}`, response);\n      handler(response);\n    } else {\n      console.warn(`No response handler found for channel: ${channel}`);\n    }\n  }\n\n  // Method to remove response handlers\n  removeResponseHandler(channel: string): void {\n    this.responseHandlers.delete(channel);\n    console.log(`Removed response handler for channel: ${channel}`);\n  }\n\n  // Machine registration for state machines\n  registerMachine(name: string, machine: any, config: any = {}): void {\n    console.log(`Registering machine: ${name}`, { config });\n    // Store the machine registration for future use\n    // This could be used for machine discovery, monitoring, etc.\n    if (!this.machines) {\n      this.machines = new Map();\n    }\n    this.machines.set(name, { machine, config, registeredAt: new Date().toISOString() });\n  }\n\n  // Get registered machines\n  getRegisteredMachines(): Map<string, any> {\n    return this.machines || new Map();\n  }\n\n  // Get a specific registered machine\n  getRegisteredMachine(name: string): any {\n    return this.machines?.get(name);\n  }\n}\n\nexport function createRobotCopy(config?: RobotCopyConfig): RobotCopy {\n  return new RobotCopy(config);\n} ","/**\n * An enumeration of status codes.\n */\nexport var SpanStatusCode;\n(function (SpanStatusCode) {\n    /**\n     * The default status.\n     */\n    SpanStatusCode[SpanStatusCode[\"UNSET\"] = 0] = \"UNSET\";\n    /**\n     * The operation has been validated by an Application developer or\n     * Operator to have completed successfully.\n     */\n    SpanStatusCode[SpanStatusCode[\"OK\"] = 1] = \"OK\";\n    /**\n     * The operation contains an error.\n     */\n    SpanStatusCode[SpanStatusCode[\"ERROR\"] = 2] = \"ERROR\";\n})(SpanStatusCode || (SpanStatusCode = {}));\n//# sourceMappingURL=status.js.map","import { SpanStatusCode } from '@opentelemetry/api';\n\nexport interface OpenTelemetryConfig {\n  serviceName: string;\n  serviceVersion: string;\n  environment: string;\n  endpoint: string;\n  enableMetrics?: boolean;\n  enableLogs?: boolean;\n  samplingRate?: number;\n  enableStackTraces?: boolean;\n  maxStackTraceDepth?: number;\n}\n\nexport interface StackTraceInfo {\n  message: string;\n  stack: string;\n  name: string;\n  fileName?: string;\n  lineNumber?: number;\n  columnNumber?: number;\n  functionName?: string;\n}\n\nexport interface ErrorContext {\n  error: Error;\n  stackTrace: StackTraceInfo;\n  context?: Record<string, any>;\n  timestamp: number;\n}\n\nexport class OpenTelemetryManager {\n  private config: OpenTelemetryConfig;\n  private isInitialized: boolean = false;\n  private errorRegistry: Map<string, ErrorContext> = new Map();\n\n  constructor(config: OpenTelemetryConfig) {\n    this.config = {\n      enableMetrics: true,\n      enableLogs: true,\n      samplingRate: 1.0,\n      enableStackTraces: true,\n      maxStackTraceDepth: 10,\n      ...config\n    };\n  }\n\n  async initialize(): Promise<void> {\n    if (this.isInitialized) return;\n\n    try {\n      console.log('üîß Initializing OpenTelemetry...');\n      console.log(`  üì° Service: ${this.config.serviceName}`);\n      console.log(`  üåç Environment: ${this.config.environment}`);\n      console.log(`  üîó Endpoint: ${this.config.endpoint}`);\n      console.log(`  üîç Stack Traces: ${this.config.enableStackTraces ? 'Enabled' : 'Disabled'}`);\n      \n      // For now, we'll use a simplified approach without the full SDK\n      // This will still provide trace ID generation and basic functionality\n      this.isInitialized = true;\n      console.log('‚úÖ OpenTelemetry initialized successfully (simplified mode)');\n    } catch (error) {\n      console.error('‚ùå Failed to initialize OpenTelemetry:', error);\n      throw error;\n    }\n  }\n\n  async shutdown(): Promise<void> {\n    if (!this.isInitialized) return;\n\n    try {\n      console.log('üîÑ Shutting down OpenTelemetry...');\n      this.isInitialized = false;\n      console.log('‚úÖ OpenTelemetry shutdown complete');\n    } catch (error) {\n      console.error('‚ùå Error during OpenTelemetry shutdown:', error);\n    }\n  }\n\n  // Generate a new trace ID using a simple approach\n  generateTraceId(): string {\n    // Generate a random 32-character hex string for trace ID\n    return Array.from({ length: 32 }, () => \n      Math.floor(Math.random() * 16).toString(16)\n    ).join('');\n  }\n\n  // Generate a new span ID using a simple approach\n  generateSpanId(): string {\n    // Generate a random 16-character hex string for span ID\n    return Array.from({ length: 16 }, () => \n      Math.floor(Math.random() * 16).toString(16)\n    ).join('');\n  }\n\n  // Extract stack trace information from an Error object\n  extractStackTrace(error: Error): StackTraceInfo {\n    if (!this.config.enableStackTraces) {\n      return {\n        message: error.message,\n        stack: '',\n        name: error.name\n      };\n    }\n\n    const stackLines = error.stack?.split('\\n') || [];\n    const stackTrace: StackTraceInfo = {\n      message: error.message,\n      stack: error.stack || '',\n      name: error.name\n    };\n\n    // Parse stack trace lines to extract file and line information\n    if (stackLines.length > 1) {\n      // Skip the first line (error message) and parse the stack\n      for (let i = 1; i < Math.min(stackLines.length, this.config.maxStackTraceDepth! + 1); i++) {\n        const line = stackLines[i].trim();\n        if (line.startsWith('at ')) {\n          // Parse: \"at FunctionName (fileName:lineNumber:columnNumber)\"\n          const match = line.match(/at\\s+(.+?)\\s+\\((.+):(\\d+):(\\d+)\\)/);\n          if (match) {\n            stackTrace.functionName = match[1];\n            stackTrace.fileName = match[2];\n            stackTrace.lineNumber = parseInt(match[3]);\n            stackTrace.columnNumber = parseInt(match[4]);\n            break; // Get the first meaningful stack frame\n          }\n        }\n      }\n    }\n\n    return stackTrace;\n  }\n\n  // Capture error context with stack trace\n  captureError(error: Error, context?: Record<string, any>): string {\n    if (!this.config.enableStackTraces) {\n      return this.generateTraceId();\n    }\n\n    const traceId = this.generateTraceId();\n    const stackTrace = this.extractStackTrace(error);\n    \n    const errorContext: ErrorContext = {\n      error,\n      stackTrace,\n      context,\n      timestamp: Date.now()\n    };\n\n    this.errorRegistry.set(traceId, errorContext);\n    \n    console.log(`üîç Error captured with trace ID: ${traceId}`);\n    console.log(`  üìç File: ${stackTrace.fileName}:${stackTrace.lineNumber}`);\n    console.log(`  üîß Function: ${stackTrace.functionName}`);\n    console.log(`  üí¨ Message: ${stackTrace.message}`);\n    \n    return traceId;\n  }\n\n  // Get error context by trace ID\n  getErrorContext(traceId: string): ErrorContext | undefined {\n    return this.errorRegistry.get(traceId);\n  }\n\n  // Start a new span with enhanced error handling\n  startSpan(name: string, _options?: any) {\n    // Create a simple span object for now\n    const spanId = this.generateSpanId();\n    const traceId = this.generateTraceId();\n    \n    // Create a proper span object with its own state\n    const span = {\n      name,\n      traceId,\n      spanId,\n      attributes: {} as Record<string, any>,\n      status: { code: SpanStatusCode.OK, message: '' },\n      \n      setAttributes: (attributes: Record<string, any>) => {\n        // Store attributes on the span object\n        Object.assign(span.attributes, attributes);\n      },\n      \n      setStatus: (status: any) => {\n        // Store status on the span object\n        span.status = status;\n      },\n      \n      recordException: (error: Error, attributes?: Record<string, any>) => {\n        // Capture error with stack trace\n        const errorTraceId = this.captureError(error, attributes);\n        \n        // Set error attributes on the span\n        span.setAttributes({\n          'error': true,\n          'error.message': error.message,\n          'error.type': error.name,\n          'error.stack_trace_id': errorTraceId,\n          'error.timestamp': new Date().toISOString()\n        });\n\n        // Also set any additional attributes passed in\n        if (attributes) {\n          span.setAttributes(attributes);\n        }\n\n        // Set span status to error\n        span.setStatus({ code: SpanStatusCode.ERROR, message: error.message });\n        \n        console.log(`üö® Exception recorded in span: ${name} (${traceId}:${spanId})`);\n        console.log(`  üîç Error trace ID: ${errorTraceId}`);\n      },\n      \n      end: () => {\n        // End the span\n        console.log(`üîç Span ended: ${name} (${traceId}:${spanId})`);\n        console.log(`  üìä Final attributes:`, span.attributes);\n        console.log(`  üìä Final status:`, span.status);\n      },\n      \n      spanContext: () => ({\n        traceId,\n        spanId,\n        traceFlags: 1,\n        isRemote: false\n      })\n    };\n    \n    return span;\n  }\n\n  // Get current trace context\n  getCurrentTraceContext() {\n    // For now, return a generated context\n    return {\n      traceId: this.generateTraceId(),\n      spanId: this.generateSpanId(),\n      traceFlags: 1,\n      isRemote: false,\n    };\n  }\n\n  // Create a trace context for HTTP requests\n  createTraceContext() {\n    const traceId = this.generateTraceId();\n    const spanId = this.generateSpanId();\n    \n    return {\n      traceId,\n      spanId,\n      headers: {\n        'X-Trace-ID': traceId,\n        'X-Span-ID': spanId,\n        'traceparent': `00-${traceId}-${spanId}-01`,\n      }\n    };\n  }\n\n  // Extract trace context from HTTP headers\n  extractTraceContext(headers: Record<string, string>) {\n    const traceId = headers['x-trace-id'] || headers['X-Trace-ID'];\n    const spanId = headers['x-span-id'] || headers['X-Span-ID'];\n    const traceparent = headers['traceparent'];\n\n    if (traceId && spanId) {\n      return { traceId, spanId };\n    }\n\n    if (traceparent) {\n      // Parse W3C traceparent header: 00-<trace-id>-<span-id>-<trace-flags>\n      const parts = traceparent.split('-');\n      if (parts.length === 4) {\n        return { traceId: parts[1], spanId: parts[2] };\n      }\n    }\n\n    return null;\n  }\n\n  // Get error statistics\n  getErrorStats(): Record<string, any> {\n    if (!this.config.enableStackTraces) {\n      return { enabled: false };\n    }\n\n    const errors = Array.from(this.errorRegistry.values());\n    const errorTypes = new Map<string, number>();\n    const fileErrors = new Map<string, number>();\n\n    errors.forEach(errorContext => {\n      // Count error types\n      const errorType = errorContext.error.name;\n      errorTypes.set(errorType, (errorTypes.get(errorType) || 0) + 1);\n\n      // Count errors by file\n      if (errorContext.stackTrace.fileName) {\n        fileErrors.set(errorContext.stackTrace.fileName, (fileErrors.get(errorContext.stackTrace.fileName) || 0) + 1);\n      }\n    });\n\n    return {\n      enabled: true,\n      totalErrors: errors.length,\n      errorTypes: Object.fromEntries(errorTypes),\n      fileErrors: Object.fromEntries(fileErrors),\n      recentErrors: errors\n        .sort((a, b) => b.timestamp - a.timestamp)\n        .slice(0, 5)\n        .map(ec => ({\n          message: ec.error.message,\n          type: ec.error.name,\n          file: ec.stackTrace.fileName,\n          line: ec.stackTrace.lineNumber,\n          timestamp: new Date(ec.timestamp).toISOString()\n        }))\n    };\n  }\n\n  // Clear error registry (useful for testing or cleanup)\n  clearErrorRegistry(): void {\n    this.errorRegistry.clear();\n    console.log('üßπ Error registry cleared');\n  }\n\n  getInitializationStatus(): boolean {\n    return this.isInitialized;\n  }\n\n  getConfig(): OpenTelemetryConfig {\n    return { ...this.config };\n  }\n}\n\n// Create and export a singleton instance\nexport const openTelemetryManager = new OpenTelemetryManager({\n  serviceName: 'tome-connector-editor',\n  serviceVersion: '1.0.0',\n  environment: process.env.NODE_ENV || 'development',\n  endpoint: process.env.OTEL_ENDPOINT || 'http://localhost:4318',\n  enableMetrics: true,\n  enableLogs: true,\n  enableStackTraces: true,\n  maxStackTraceDepth: 10,\n});\n\n// Initialize OpenTelemetry when this module is imported\nif (process.env.NODE_ENV !== 'test') {\n  openTelemetryManager.initialize().catch(console.error);\n}\n","import express from 'express';\nimport cors from 'cors';\nimport helmet from 'helmet';\nimport { RobotCopy } from './core/RobotCopy';\nimport { openTelemetryManager } from './opentelemetry-setup';\nimport { SpanStatusCode } from '@opentelemetry/api';\n\n// Simple template processor for server-side rendering\nclass TemplateProcessor {\n  private static processTemplate(template: string, variables: Record<string, any> = {}): string {\n    // Only remove very specific JSX patterns that cause browser errors\n    // Be very conservative to avoid breaking JavaScript code structure\n    \n    let processed = template;\n    \n    // Remove JSX code blocks with problematic attributes (only if they're complete)\n    processed = processed.replace(/<[^>]*\\s+value=\\{.*?\\}[^>]*>/g, '');\n    processed = processed.replace(/<[^>]*\\s+onChange=\\{.*?\\}[^>]*>/g, '');\n    processed = processed.replace(/<[^>]*\\s+checked=\\{.*?\\}[^>]*>/g, '');\n    \n    // Remove JSX expressions but be very careful\n    // Only remove JSX expressions that are clearly JSX, not JavaScript\n    // Look for patterns like {setting.value} but avoid {this.state.hasError}\n    processed = processed.replace(/\\{([a-zA-Z_][a-zA-Z0-9_]*\\.[a-zA-Z0-9_]*)\\}/g, '');\n    \n    // Replace template variables\n    Object.entries(variables).forEach(([key, value]) => {\n      const pattern = new RegExp(`\\\\{\\\\{${key}\\\\}\\\\}`, 'g');\n      processed = processed.replace(pattern, String(value));\n    });\n    \n    return processed;\n  }\n  \n  static renderComponentTemplate(template: string, componentName: string): string {\n    return this.processTemplate(template, {\n      componentName,\n      timestamp: new Date().toISOString(),\n      version: '1.2.0'\n    });\n  }\n}\n\n// Editor-specific configuration\nconst EDITOR_CONFIG = {\n  port: process.env.EDITOR_PORT || 3003,\n  enableCors: true,\n  enableSecurity: true\n};\n\n// Initialize RobotCopy with editor-specific features\nconst robotCopy = new RobotCopy({\n  unleashUrl: process.env.UNLEASH_URL || 'http://localhost:4242/api',\n  unleashAppName: process.env.UNLEASH_APP_NAME || 'tome-connector-editor',\n  unleashEnvironment: process.env.UNLEASH_ENVIRONMENT || 'development'\n});\n\n// Create Express app\nconst app = express();\n\n// OpenTelemetry middleware for trace context propagation\napp.use((req, res, next) => {\n  // Extract trace context from incoming request\n  const traceContext = openTelemetryManager.extractTraceContext(req.headers);\n  \n  if (traceContext) {\n    // If trace context exists, use it\n    req.traceId = traceContext.traceId;\n    req.spanId = traceContext.spanId;\n  } else {\n    // Generate new trace context for this request\n    const newContext = openTelemetryManager.createTraceContext();\n    req.traceId = newContext.traceId;\n    req.spanId = newContext.spanId;\n  }\n  \n  // Add trace headers to response\n  res.set('X-Trace-ID', req.traceId);\n  res.set('X-Span-ID', req.spanId);\n  \n  next();\n});\n\n// Security middleware\nif (EDITOR_CONFIG.enableSecurity) {\n  app.use(helmet({\n    contentSecurityPolicy: {\n      directives: {\n        defaultSrc: [\"'self'\"],\n        styleSrc: [\"'self'\", \"'unsafe-inline'\"],\n        scriptSrc: [\"'self'\", \"'unsafe-eval'\", \"'unsafe-inline'\"],\n        imgSrc: [\"'self'\", \"data:\", \"https:\"],\n        connectSrc: [\"'self'\", \"ws:\", \"wss:\"],\n        // Block extension scripts and service workers\n        workerSrc: [\"'none'\"],\n        childSrc: [\"'self'\"],\n        frameSrc: [\"'none'\"],\n        objectSrc: [\"'none'\"],\n        baseUri: [\"'self'\"],\n        formAction: [\"'self'\"],\n        // Prevent extension manifest injection\n        manifestSrc: [\"'none'\"],\n        // Allow inline styles and scripts for editor functionality\n        styleSrcAttr: [\"'unsafe-inline'\"],\n        scriptSrcAttr: [\"'unsafe-inline'\"]\n      }\n    },\n    // Additional security headers\n    crossOriginEmbedderPolicy: false,\n    crossOriginOpenerPolicy: false,\n    crossOriginResourcePolicy: { policy: \"cross-origin\" }\n  }));\n}\n\n// CORS middleware\nif (EDITOR_CONFIG.enableCors) {\n  app.use(cors({\n    origin: process.env.ALLOWED_ORIGINS?.split(',') || ['http://localhost:3000', 'http://localhost:3001'],\n    credentials: true,\n    methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],\n    allowedHeaders: ['Content-Type', 'Authorization', 'X-Requested-With']\n  }));\n}\n\n// Extension isolation middleware\napp.use((req, res, next) => {\n  // Block extension-related requests\n  if (req.path.includes('manifest.json') || \n      req.path.includes('background.js') || \n      req.path.includes('content.js') ||\n      req.path.includes('service-worker') ||\n      req.path.includes('chrome-extension') ||\n      req.path.includes('shadowContent.js') ||\n      req.path.includes('log-view-machine')) {\n    return res.status(404).json({ error: 'Extension resources not available' });\n  }\n  \n  // Add headers to prevent extension interference\n  res.set({\n    'X-Frame-Options': 'DENY',\n    'X-Content-Type-Options': 'nosniff',\n    'Referrer-Policy': 'strict-origin-when-cross-origin',\n    'Permissions-Policy': 'geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), accelerometer=()',\n    // Additional headers to block extension loading\n    'X-Content-Security-Policy': \"default-src 'self'; worker-src 'none'; manifest-src 'none';\",\n    'X-WebKit-CSP': \"default-src 'self'; worker-src 'none'; manifest-src 'none';\"\n  });\n  \n  next();\n});\n\n// Body parsing middleware\napp.use(express.json({ limit: '10mb' }));\napp.use(express.urlencoded({ extended: true, limit: '10mb' }));\n\n// Health check endpoint\napp.get('/health', (req, res) => {\n  res.json({\n    status: 'healthy',\n    service: 'tome-connector-editor',\n    timestamp: new Date().toISOString(),\n    uptime: process.uptime(),\n    version: process.env.npm_package_version || '1.0.0'\n  });\n});\n\n// Editor-specific API endpoints\napp.get('/api/editor/status', (req, res) => {\n  res.json({\n    status: 'ready',\n    service: 'tome-connector-editor',\n    robotCopy: {\n      unleashUrl: robotCopy['config'].unleashUrl,\n      unleashAppName: robotCopy['config'].unleashAppName,\n      unleashEnvironment: robotCopy['config'].unleashEnvironment\n    }\n  });\n});\n\n// Pact-related endpoints (using actual RobotCopy methods)\napp.get('/api/pact/features', async (req, res) => {\n  try {\n    // Get available feature toggles\n    const features = {\n      'fish-burger-kotlin-backend': await robotCopy.isEnabled('fish-burger-kotlin-backend'),\n      'fish-burger-node-backend': await robotCopy.isEnabled('fish-burger-node-backend'),\n      'enable-tracing': await robotCopy.isEnabled('enable-tracing'),\n      'enable-datadog': await robotCopy.isEnabled('enable-datadog')\n    };\n    \n    res.json({ features });\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to retrieve feature toggles' });\n  }\n});\n\napp.get('/api/pact/backend', async (req, res) => {\n  try {\n    const backendType = await robotCopy.getBackendType();\n    const backendUrl = await robotCopy.getBackendUrl();\n    \n    res.json({ \n      backendType, \n      backendUrl,\n      features: {\n        'fish-burger-kotlin-backend': await robotCopy.isEnabled('fish-burger-kotlin-backend'),\n        'fish-burger-node-backend': await robotCopy.isEnabled('fish-burger-node-backend')\n      }\n    });\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to retrieve backend information' });\n  }\n});\n\n// Tracing endpoints\napp.get('/api/tracing/status', (req, res) => {\n  const currentContext = openTelemetryManager.getCurrentTraceContext();\n  \n  res.json({\n    tracing: {\n      enabled: openTelemetryManager.getInitializationStatus(),\n      opentelemetry: true,\n      currentTrace: currentContext,\n      service: {\n        name: 'tome-connector-editor',\n        version: '1.0.0',\n        environment: process.env.NODE_ENV || 'development'\n      },\n      endpoint: process.env.OTEL_ENDPOINT || 'http://localhost:4318'\n    }\n  });\n});\n\napp.post('/api/tracing/message', async (req, res) => {\n  try {\n    const { action, data } = req.body;\n    \n    if (!action) {\n      return res.status(400).json({ error: 'action parameter is required' });\n    }\n    \n    // Start a span for this message\n    const span = openTelemetryManager.startSpan(`tracing.message.${action}`);\n    \n    try {\n      const result = await robotCopy.sendMessage(action, data);\n      \n      // Add attributes to span\n      span.setAttributes({\n        'action': action,\n        'success': true,\n        'traceId': req.traceId,\n        'spanId': req.spanId\n      });\n      \n      span.setStatus({ code: SpanStatusCode.OK });\n      res.json({ success: true, result, traceId: req.traceId, spanId: req.spanId });\n    } catch (error) {\n      span.setStatus({ code: SpanStatusCode.ERROR, message: error.message });\n      throw error;\n    } finally {\n      span.end();\n    }\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to send message', traceId: req.traceId, spanId: req.spanId });\n  }\n});\n\napp.get('/api/tracing/message/:messageId', (req, res) => {\n  try {\n    const { messageId } = req.params;\n    const message = robotCopy.getMessage(messageId);\n    \n    if (message) {\n      res.json({ \n        message,\n        traceId: req.traceId,\n        spanId: req.spanId\n      });\n    } else {\n      res.status(404).json({ \n        error: 'Message not found',\n        traceId: req.traceId,\n        spanId: req.spanId\n      });\n    }\n  } catch (error) {\n    res.status(500).json({ \n      error: 'Failed to retrieve message',\n      traceId: req.traceId,\n      spanId: req.spanId\n    });\n  }\n});\n\napp.get('/api/tracing/trace/:traceId', (req, res) => {\n  try {\n    const { traceId } = req.params;\n    const messages = robotCopy.getTraceMessages(traceId);\n    const fullTrace = robotCopy.getFullTrace(traceId);\n    \n    res.json({ \n      traceId, \n      messageCount: messages.length,\n      messages,\n      fullTrace,\n      currentTrace: {\n        traceId: req.traceId,\n        spanId: req.spanId\n      }\n    });\n  } catch (error) {\n    res.status(500).json({ \n      error: 'Failed to retrieve trace',\n      traceId: req.traceId,\n      spanId: req.spanId\n    });\n  }\n});\n\n// Generate new IDs using OpenTelemetry\napp.get('/api/tracing/generate', (req, res) => {\n  try {\n    const messageId = robotCopy.generateMessageId();\n    const traceId = openTelemetryManager.generateTraceId();\n    const spanId = openTelemetryManager.generateSpanId();\n    \n    res.json({ \n      messageId, \n      traceId, \n      spanId,\n      currentTrace: {\n        traceId: req.traceId,\n        spanId: req.spanId\n      }\n    });\n  } catch (error) {\n    res.status(500).json({ \n      error: 'Failed to generate IDs',\n      traceId: req.traceId,\n      spanId: req.spanId\n    });\n  }\n});\n\n// Main studio interface\napp.get('/', (req, res) => {\n  res.send(`\n    <!DOCTYPE html>\n    <html lang=\"en\">\n    <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <title>Tome Connector Studio</title>\n        <!-- Extension isolation meta tags -->\n        <meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-eval' 'unsafe-inline'; worker-src 'none'; child-src 'self'; frame-src 'none'; object-src 'none'; manifest-src 'none'; style-src-attr 'unsafe-inline'; script-src-attr 'unsafe-inline';\">\n        <meta name=\"referrer\" content=\"strict-origin-when-cross-origin\">\n        <meta name=\"format-detection\" content=\"telephone=no\">\n        <meta name=\"robots\" content=\"noindex, nofollow\">\n        <style>\n            body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 0; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }\n            .container { max-width: 1000px; margin: 0 auto; padding: 40px 20px; }\n            .hero { text-align: center; margin-bottom: 60px; }\n            .hero h1 { color: white; margin-bottom: 20px; font-size: 3.5rem; font-weight: 700; text-shadow: 0 2px 4px rgba(0,0,0,0.3); }\n            .hero p { color: rgba(255,255,255,0.9); font-size: 1.3rem; margin-bottom: 40px; max-width: 600px; margin-left: auto; margin-right: auto; }\n            .hero-button { display: inline-block; padding: 20px 40px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; text-decoration: none; border-radius: 50px; font-size: 1.2rem; font-weight: 600; transition: all 0.3s; box-shadow: 0 8px 25px rgba(0,0,0,0.3); }\n            .hero-button:hover { transform: translateY(-3px); box-shadow: 0 12px 35px rgba(0,0,0,0.4); }\n            .main-content { background: white; border-radius: 20px; padding: 50px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); }\n            .nav { margin: 30px 0; text-align: center; }\n            .nav a { display: inline-block; margin: 10px 15px; padding: 12px 24px; background: #2563eb; color: white; text-decoration: none; border-radius: 8px; transition: all 0.2s; }\n            .nav a:hover { background: #1d4ed8; transform: translateY(-2px); }\n            .endpoint { background: #f8fafc; padding: 20px; margin: 15px 0; border-radius: 12px; border-left: 4px solid #2563eb; }\n            .endpoint h3 { margin: 0 0 15px 0; color: #1e293b; }\n            .endpoint p { margin: 8px 0; color: #475569; }\n            .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 30px 0; }\n            .feature-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 15px; text-align: center; }\n            .feature-card h3 { margin: 0 0 15px 0; font-size: 1.4rem; }\n            .feature-card p { margin: 0; opacity: 0.9; }\n        </style>\n    </head>\n    <body>\n        <div class=\"container\">\n            <!-- Hero Section -->\n            <div class=\"hero\">\n                <h1>üåä Tome Connector Studio</h1>\n                <p>A powerful studio for building and managing Tome Connector components, state machines, and integrations.</p>\n                <a href=\"/wave-reader\" class=\"hero-button\">üöÄ Open Wave Reader Editor</a>\n            </div>\n            \n            <!-- Main Content -->\n            <div class=\"main-content\">\n                <!-- Feature Grid -->\n                <div class=\"feature-grid\">\n                    <div class=\"feature-card\">\n                        <h3>üé® Component Editor</h3>\n                        <p>Full-featured editor for Wave Reader components with live preview and file management</p>\n                    </div>\n                    <div class=\"feature-card\">\n                        <h3>‚öôÔ∏è State Machines</h3>\n                        <p>Visual state machine editor and management for complex component behaviors</p>\n                    </div>\n                    <div class=\"feature-card\">\n                        <h3>üîç Tracing & Monitoring</h3>\n                        <p>Advanced tracing and monitoring capabilities for debugging and performance analysis</p>\n                    </div>\n                </div>\n                \n                <!-- Navigation -->\n                <div class=\"nav\">\n                    <a href=\"/wave-reader\">üé® Wave Reader Editor</a>\n                    <a href=\"/health\">üìä Health Check</a>\n                    <a href=\"/api/editor/status\">üéõÔ∏è Editor Status</a>\n                    <a href=\"/api/pact/features\">‚öôÔ∏è Pact Features</a>\n                </div>\n                \n                <!-- Available Endpoints -->\n                <h2>Available Endpoints</h2>\n                <div class=\"endpoint\">\n                    <h3>üé® Wave Reader Editor</h3>\n                    <p><strong>GET /wave-reader</strong> - Main editor interface for Wave Reader components</p>\n                </div>\n                <div class=\"endpoint\">\n                    <h3>üìä Health & Status</h3>\n                    <p><strong>GET /health</strong> - Server health check</p>\n                    <p><strong>GET /api/editor/status</strong> - Editor status and configuration</p>\n                </div>\n                <div class=\"endpoint\">\n                    <h3>‚öôÔ∏è Pact Features</h3>\n                    <p><strong>GET /api/pact/features</strong> - Available Pact features</p>\n                    <p><strong>GET /api/pact/backend</strong> - Pact backend status</p>\n                </div>\n                <div class=\"endpoint\">\n                    <h3>üîç Tracing & Monitoring</h3>\n                    <p><strong>GET /api/tracing/status</strong> - Tracing system status</p>\n                    <p><strong>POST /api/tracing/message</strong> - Send tracing message</p>\n                    <p><strong>GET /api/tracing/message/:messageId</strong> - Get specific message</p>\n                    <p><strong>GET /api/tracing/trace/:traceId</strong> - Get trace details</p>\n                    <p><strong>GET /api/tracing/generate</strong> - Generate new IDs</p>\n                </div>\n            </div>\n        </div>\n    </body>\n    </html>\n  `);\n});\n\n// Wave Reader Editor Interface\napp.get('/wave-reader', (req, res) => {\n  const workingDir = process.env.WORKING_DIRECTORY || 'Current Directory';\n  \n  const template = `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n    <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <title>Wave Reader Editor - Tome Connector Studio</title>\n        <!-- Extension isolation meta tags -->\n        <meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-eval' 'unsafe-inline'; worker-src 'none'; child-src 'self'; frame-src 'none'; object-src 'none'; manifest-src 'none'; style-src-attr 'unsafe-inline'; script-src-attr 'unsafe-inline';\">\n        <meta name=\"referrer\" content=\"strict-origin-when-cross-origin\">\n        <meta name=\"format-detection\" content=\"telephone=no\">\n        <meta name=\"robots\" content=\"noindex, nofollow\">\n        <style>\n            body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 0; background: #f8fafc; }\n            .header { background: white; padding: 20px; border-bottom: 1px solid #e2e8f0; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }\n            .header h1 { margin: 0; color: #2563eb; }\n            .header p { margin: 5px 0 0 0; color: #64748b; }\n            .container { max-width: 1200px; margin: 0 auto; padding: 20px; }\n            .nav { margin: 20px 0; }\n            .nav a { display: inline-block; margin: 0 15px 15px 0; padding: 10px 20px; background: #2563eb; color: white; text-decoration: none; border-radius: 6px; transition: background 0.2s; }\n            .nav a:hover { background: #1d4ed8; }\n            .content { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\n            .project-info { background: #f1f5f9; padding: 20px; border-radius: 8px; margin-bottom: 30px; }\n            .project-info h3 { margin: 0 0 15px 0; color: #1e293b; }\n            .project-info p { margin: 5px 0; color: #475569; }\n            .editor-section { margin: 30px 0; }\n            .editor-section h3 { color: #1e293b; border-bottom: 2px solid #e2e8f0; padding-bottom: 10px; }\n            .component-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-top: 20px; }\n            .component-card { background: #f8fafc; padding: 20px; border-radius: 8px; border: 1px solid #e2e8f0; cursor: pointer; transition: all 0.2s; position: relative; }\n            .component-card:hover { background: #f1f5f9; border-color: #2563eb; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(37, 99, 235, 0.15); }\n            .component-card.clicked { background: #dbeafe; border-color: #2563eb; }\n            .component-card h4 { margin: 0 0 10px 0; color: #1e293b; }\n            .component-card p { margin: 5px 0; color: #64748b; font-size: 14px; }\n            .status { display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: 500; }\n            .status.active { background: #dcfce7; color: #166534; }\n            .status.inactive { background: #fef2f2; color: #991b1b; }\n            .component-actions { margin-top: 15px; display: flex; gap: 10px; }\n            .btn { padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: 500; transition: all 0.2s; }\n            .btn-primary { background: #2563eb; color: white; }\n            .btn-primary:hover { background: #1d4ed8; }\n            .btn-secondary { background: #64748b; color: white; }\n            .btn-secondary:hover { background: #475569; }\n            .btn-success { background: #059669; color: white; }\n            .btn-success:hover { background: #047857; }\n            .component-editor { background: white; border: 2px solid #e2e8f0; border-radius: 12px; margin-top: 30px; padding: 30px; display: none; }\n            .component-editor.active { display: block; }\n            .editor-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 2px solid #e2e8f0; }\n            .editor-header h3 { margin: 0; color: #1e293b; }\n            .close-btn { background: #ef4444; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 14px; }\n            .close-btn:hover { background: #dc2626; }\n            .editor-content { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }\n            .editor-panel { background: #f8fafc; padding: 20px; border-radius: 8px; border: 1px solid #e2e8f0; }\n            .editor-panel h4 { margin: 0 0 15px 0; color: #1e293b; }\n            .code-editor { background: #1e293b; color: #e2e8f0; padding: 15px; border-radius: 6px; font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace; font-size: 13px; line-height: 1.5; min-height: 200px; white-space: pre-wrap; }\n            .file-tree { background: #f1f5f9; padding: 15px; border-radius: 6px; border: 1px solid #e2e8f0; }\n            .file-item { padding: 8px 12px; margin: 4px 0; border-radius: 4px; cursor: pointer; transition: background 0.2s; }\n            .file-item:hover { background: #e2e8f0; }\n            .file-item.active { background: #dbeafe; color: #1e40af; }\n            .loading { display: none; text-align: center; padding: 40px; color: #64748b; }\n            .loading.active { display: block; }\n            .spinner { border: 3px solid #f3f3f3; border-top: 3px solid #2563eb; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; margin: 0 auto 20px; }\n            @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }\n        </style>\n    </head>\n    <body>\n        <div class=\"header\">\n            <div class=\"container\">\n                <h1>üé® Wave Reader Editor</h1>\n                <p>Tome Connector Studio - Component Middleware Editor</p>\n            </div>\n        </div>\n        \n        <div class=\"container\">\n            <div class=\"nav\">\n                <a href=\"/\">üè† Studio Home</a>\n                <a href=\"/health\">üìä Health</a>\n                <a href=\"/api/editor/status\">üéõÔ∏è Status</a>\n                <a href=\"/api/pact/features\">‚öôÔ∏è Pact Features</a>\n            </div>\n            \n            <div class=\"content\">\n                <div class=\"project-info\">\n                    <h3>üìÅ Project Information</h3>\n                    <p><strong>Working Directory:</strong> ${workingDir}</p>\n                    <p><strong>Studio Version:</strong> 1.2.0</p>\n                    <p><strong>Status:</strong> <span class=\"status active\">Active</span></p>\n                </div>\n                \n                <div class=\"editor-section\">\n                    <h3>üîß Component Middleware</h3>\n                    <p>Click on any component card to open it in the editor. Manage and configure Wave Reader component middleware components.</p>\n                    \n                    <div class=\"component-list\">\n                        <div class=\"component-card\" data-component=\"error-boundary\">\n                            <h4>üéØ Error Boundary</h4>\n                            <p>Error handling and boundary management for components</p>\n                            <p><strong>Status:</strong> <span class=\"status active\">Available</span></p>\n                            <div class=\"component-actions\">\n                                <button class=\"btn btn-primary\" data-action=\"open-editor\" data-component=\"error-boundary\">Open Editor</button>\n                                <button class=\"btn btn-secondary\" data-action=\"view-files\" data-component=\"error-boundary\">View Files</button>\n                            </div>\n                        </div>\n                        <div class=\"component-card\" data-component=\"go-button\">\n                            <h4>üîò Go Button</h4>\n                            <p>Navigation and action button components</p>\n                            <p><strong>Status:</strong> <span class=\"status active\">Available</span></p>\n                            <div class=\"component-actions\">\n                                <button class=\"btn btn-primary\" data-action=\"open-editor\" data-component=\"go-button\">Open Editor</button>\n                                <button class=\"btn btn-secondary\" data-action=\"view-files\" data-component=\"go-button\">View Files</button>\n                            </div>\n                        </div>\n                        <div class=\"component-card\" data-component=\"selector-hierarchy\">\n                            <h4>üìã Selector Hierarchy</h4>\n                            <p>Component selection and hierarchy management</p>\n                            <p><strong>Status:</strong> <span class=\"status active\">Available</span></p>\n                            <div class=\"component-actions\">\n                                <button class=\"btn btn-primary\" data-action=\"open-editor\" data-component=\"selector-hierarchy\">Open Editor</button>\n                                <button class=\"btn btn-secondary\" data-action=\"view-files\" data-component=\"selector-hierarchy\">View Files</button>\n                            </div>\n                        </div>\n                        <div class=\"component-card\" data-component=\"settings\">\n                            <h4>‚öôÔ∏è Settings</h4>\n                            <p>Configuration and settings management</p>\n                            <p><strong>Status:</strong> <span class=\"status active\">Available</span></p>\n                            <div class=\"component-actions\">\n                                <button class=\"btn btn-primary\" data-action=\"open-editor\" data-component=\"settings\">Open Editor</button>\n                                <button class=\"btn btn-secondary\" data-action=\"view-files\" data-component=\"settings\">View Files</button>\n                            </div>\n                        </div>\n                        <div class=\"component-card\" data-component=\"wave-tabs\">\n                            <h4>üìä Wave Tabs</h4>\n                            <p>Tab-based navigation and content management</p>\n                            <p><strong>Status:</strong> <span class=\"status active\">Available</span></p>\n                            <div class=\"component-actions\">\n                                <button class=\"btn btn-primary\" data-action=\"open-editor\" data-component=\"wave-tabs\">Open Editor</button>\n                                <button class=\"btn btn-secondary\" data-action=\"view-files\" data-component=\"wave-tabs\">View Files</button>\n                            </div>\n                        </div>\n                        <div class=\"component-card\" data-component=\"scan-for-input\">\n                            <h4>üîç Scan for Input</h4>\n                            <p>Input detection and scanning functionality</p>\n                            <p><strong>Status:</strong> <span class=\"status active\">Available</span></p>\n                            <div class=\"component-actions\">\n                                <button class=\"btn btn-primary\" data-action=\"open-editor\" data-component=\"scan-for-input\">Open Editor</button>\n                                <button class=\"btn btn-secondary\" data-action=\"view-files\" data-component=\"scan-for-input\">View Files</button>\n                            </div>\n                        </div>\n                        <div class=\"component-card\" data-component=\"selector-input\">\n                            <h4>‚å®Ô∏è Selector Input</h4>\n                            <p>Input selection and management tools</p>\n                            <p><strong>Status:</strong> <span class=\"status active\">Available</span></p>\n                            <div class=\"component-actions\">\n                                <button class=\"btn btn-primary\" data-action=\"open-editor\" data-component=\"selector-input\">Open Editor</button>\n                                <button class=\"btn btn-secondary\" data-action=\"view-files\" data-component=\"selector-input\">View Files</button>\n                            </div>\n                        </div>\n                        <div class=\"component-card\" data-component=\"wave-reader\">\n                            <h4>üåä Wave Reader</h4>\n                            <p>Core Wave Reader functionality and components</p>\n                            <p><strong>Status:</strong> <span class=\"status active\">Available</span></p>\n                            <div class=\"component-actions\">\n                                <button class=\"btn btn-primary\" data-action=\"open-editor\" data-component=\"wave-reader\">Open Editor</button>\n                                <button class=\"btn btn-secondary\" data-action=\"view-files\" data-component=\"wave-reader\">View Files</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                \n                <!-- Component Editor Panel -->\n                <div class=\"component-editor\" id=\"componentEditor\">\n                    <div class=\"editor-header\">\n                        <h3 id=\"editorTitle\">Component Editor</h3>\n                        <button class=\"close-btn\" id=\"closeEditorBtn\">‚úï Close</button>\n                    </div>\n                    <div class=\"editor-content\">\n                        <div class=\"editor-panel\">\n                            <h4>üìÅ File Structure</h4>\n                            <div class=\"file-tree\" id=\"fileTree\">\n                                <!-- File items will be dynamically populated -->\n                            </div>\n                        </div>\n                        <div class=\"editor-panel\">\n                            <h4>üíª Code Editor</h4>\n                            <div class=\"code-editor\" id=\"codeEditor\" contenteditable=\"true\">\n<!-- HTML Component code will be loaded here -->\n<!-- Click on a file in the file tree to view its contents -->\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                \n                <div class=\"editor-section\">\n                    <h3>üöÄ Quick Actions</h3>\n                    <p>Common actions and shortcuts for development.</p>\n                    <div class=\"nav\">\n                        <a href=\"/api/editor/status\">üìä Check Status</a>\n                        <a href=\"/api/pact/features\">‚öôÔ∏è View Features</a>\n                        <a href=\"/api/tracing/status\">üîç Tracing Status</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <script>\n            // Component data (in a real app, this would come from the server)\n            const componentData = {\n                'error-boundary': {\n                    name: 'Error Boundary',\n                    description: 'Error handling and boundary management for components',\n                    files: {\n                        'component.tsx': '// Error Boundary Component - React component for error handling',\n                        'index.ts': 'export { ErrorBoundary } from \"./component\";',\n                        'types.ts': 'export interface ErrorInfo { componentStack: string; }',\n                        'utils.ts': 'export const logError = (error, errorInfo) => console.error(\"Error logged:\", error, errorInfo);'\n                    }\n                },\n                'go-button': {\n                    name: 'Go Button',\n                    description: 'Navigation and action button components',\n                    files: {\n                        'component.html': '<!DOCTYPE html><html><head><title>Go Button</title></head><body><button class=\"go-button\">Go</button></body></html>',\n                        'component.css': '.go-button { padding: 0.5rem 1rem; border-radius: 0.25rem; }',\n                        'component.js': 'function handleClick() { console.log(\"Button clicked\"); }'\n                    }\n                },\n                'selector-hierarchy': {\n                    name: 'Selector Hierarchy',\n                    description: 'Component selection and hierarchy management',\n                    files: {\n                        'component.html': '<!DOCTYPE html><html><head><title>Selector</title></head><body><div class=\"selector\">Selector Component</div></body></html>',\n                        'component.css': '.selector { font-family: Arial, sans-serif; }',\n                        'component.js': 'function initSelector() { console.log(\"Selector initialized\"); }'\n                    }\n                },\n                'settings': {\n                    name: 'Settings',\n                    description: 'Configuration and settings management',\n                    files: {\n                        'component.tsx': '// Settings Component - Configuration management',\n                        'index.ts': 'export { Settings } from \"./component\";',\n                        'types.ts': 'export interface Setting { key: string; value: any; }',\n                        'utils.ts': 'export const validateSetting = (setting, value) => true;'\n                    }\n                },\n                'wave-tabs': {\n                    name: 'Wave Tabs',\n                    description: 'Tab-based navigation and content management',\n                    files: {\n                        'component.tsx': '// Wave Tabs Component - Tab navigation',\n                        'index.ts': 'export { WaveTabs } from \"./component\";',\n                        'types.ts': 'export interface Tab { id: string; label: string; }',\n                        'utils.ts': 'export const createTab = (id, label) => ({ id, label });'\n                    }\n                },\n                'scan-for-input': {\n                    name: 'Scan for Input',\n                    description: 'Input detection and scanning functionality',\n                    files: {\n                        'component.tsx': '// Scan for Input Component - Input detection',\n                        'index.ts': 'export { ScanForInput } from \"./component\";',\n                        'types.ts': 'export interface ScanResult { id: string; type: string; }',\n                        'utils.ts': 'export const validateInput = (input) => input.offsetWidth > 0;'\n                    }\n                },\n                'selector-input': {\n                    name: 'Selector Input',\n                    description: 'Input selection and management tools',\n                    files: {\n                        'component.tsx': '// Selector Input Component - Input selection',\n                        'index.ts': 'export { SelectorInput } from \"./component\";',\n                        'types.ts': 'export interface SelectorSuggestion { value: string; label: string; }',\n                        'utils.ts': 'export const parseSelector = (selector) => ({ tag: \"div\", id: null, classes: [] });'\n                    }\n                },\n                'wave-reader': {\n                    name: 'Wave Reader',\n                    description: 'Core Wave Reader functionality and components',\n                    files: {\n                        'component.tsx': '// Wave Reader Component - Core functionality',\n                        'index.ts': 'export { WaveReader } from \"./component\";',\n                        'types.ts': 'export interface ReadingConfig { speed: number; autoStart: boolean; }',\n                        'utils.ts': 'export const calculateReadingTime = (text, speed) => Math.ceil(text.split(\" \").length / (60000 / speed));'\n                    }\n                }\n            };\n\n            // State variables\n            let currentComponent = null;\n            let currentFile = 'component.html';\n\n            // Event handlers\n            function openComponent(componentId) {\n                console.log('üéØ Opening component:', componentId);\n                currentComponent = componentId;\n                const component = componentData[componentId];\n                \n                if (component) {\n                    console.log('üìÅ Component found:', component);\n                    \n                    // Update UI\n                    const editorTitle = document.getElementById('editorTitle');\n                    const componentEditor = document.getElementById('componentEditor');\n                    \n                    if (editorTitle && componentEditor) {\n                        editorTitle.textContent = \\`\\${component.name} Editor\\`;\n                        console.log('üìù Editor title updated to:', component.name);\n                        \n                        componentEditor.classList.add('active');\n                        console.log('‚úÖ Editor UI updated - active class added');\n                        \n                        // Debug: Check if the class was actually added\n                        console.log('üîç Editor classes after update:', componentEditor.className);\n                        console.log('üîç Editor display style:', window.getComputedStyle(componentEditor).display);\n                        \n                        // Populate file tree with actual component files\n                        const fileTree = document.getElementById('fileTree');\n                        if (fileTree) {\n                            fileTree.innerHTML = '';\n                            const availableFiles = Object.keys(component.files);\n                            \n                            availableFiles.forEach((filename, index) => {\n                                const fileItem = document.createElement('div');\n                                fileItem.className = 'file-item';\n                                fileItem.setAttribute('data-file', filename);\n                                fileItem.textContent = filename;\n                                \n                                // Make first file active by default\n                                if (index === 0) {\n                                    fileItem.classList.add('active');\n                                }\n                                \n                                // Add click handler\n                                fileItem.addEventListener('click', function() {\n                                    const clickedFilename = this.getAttribute('data-file');\n                                    loadFile(clickedFilename);\n                                });\n                                \n                                fileTree.appendChild(fileItem);\n                            });\n                            \n                            // Load first file\n                            if (availableFiles.length > 0) {\n                                loadFile(availableFiles[0]);\n                            }\n                        }\n                        \n                        // Update component cards\n                        document.querySelectorAll('.component-card').forEach(card => {\n                            card.classList.remove('clicked');\n                        });\n                        const clickedCard = document.querySelector(\\`[data-component=\"\\${componentId}\"]\\`);\n                        if (clickedCard) {\n                            clickedCard.classList.add('clicked');\n                        }\n                    } else {\n                        console.error('‚ùå Required DOM elements not found:', { editorTitle, componentEditor });\n                        console.log('üîç DOM state check:');\n                        console.log('  - document.getElementById(\"editorTitle\"):', document.getElementById('editorTitle'));\n                        console.log('  - document.getElementById(\"componentEditor\"):', document.getElementById('componentEditor'));\n                        console.log('  - document.readyState:', document.readyState);\n                    }\n                } else {\n                    console.error('‚ùå Component not found:', componentId);\n                }\n            }\n\n            function closeComponent() {\n                document.getElementById('componentEditor').classList.remove('active');\n                document.querySelectorAll('.component-card').forEach(card => {\n                    card.classList.remove('clicked');\n                });\n                currentComponent = null;\n            }\n\n            function loadFile(filename) {\n                if (!currentComponent) return;\n                \n                currentFile = filename;\n                const component = componentData[currentComponent];\n                const fileContent = component.files[filename];\n                \n                if (fileContent) {\n                    // For HTML files, we'll display them in a preview format\n                    if (filename.endsWith('.html')) {\n                        // Create a preview container\n                        const codeEditor = document.getElementById('codeEditor');\n                        if (codeEditor) {\n                            codeEditor.innerHTML = '<div style=\"padding: 20px; background: #f8f9fa; border-radius: 8px;\"><h3>HTML Preview</h3><p>This is an HTML component file. You can view it in a browser or edit the HTML content.</p><div style=\"background: white; border: 1px solid #ddd; padding: 15px; border-radius: 4px; font-family: monospace; white-space: pre-wrap; overflow-x: auto;\">' + fileContent.replace(/</g, '&lt;').replace(/>/g, '&gt;') + '</div></div>';\n                        }\n                    } else {\n                        // For other file types, display as text\n                        const codeEditor = document.getElementById('codeEditor');\n                        if (codeEditor) {\n                            codeEditor.textContent = fileContent;\n                        }\n                    }\n                    \n                    // Update file tree - safely handle missing elements\n                    document.querySelectorAll('.file-item').forEach(item => {\n                        item.classList.remove('active');\n                    });\n                    \n                    const targetFileItem = document.querySelector(\\`[data-file=\"\\${filename}\"]\\`);\n                    if (targetFileItem) {\n                        targetFileItem.classList.add('active');\n                    } else {\n                        console.warn(\\`‚ö†Ô∏è File item not found for: \\${filename}\\`);\n                    }\n                }\n            }\n\n            function viewFiles(componentId) {\n                console.log('üìÇ Viewing files for component:', componentId);\n                const component = componentData[componentId];\n                \n                if (component) {\n                    const fileList = Object.keys(component.files).join(', ');\n                    const message = \\`üìÅ Files for \\${component.name}:\\n\\n\\${fileList}\\n\\nClick \"Open Editor\" to view and edit these files.\\`;\n                    alert(message);\n                } else {\n                    alert('‚ùå Component not found: ' + componentId);\n                }\n            }\n\n            // Initialize event listeners when DOM is loaded\n            document.addEventListener('DOMContentLoaded', function() {\n                // Button click handlers\n                document.addEventListener('click', function(e) {\n                    const target = e.target;\n                    \n                    if (target.matches('[data-action=\"open-editor\"]')) {\n                        const componentId = target.getAttribute('data-component');\n                        openComponent(componentId);\n                    } else if (target.matches('[data-action=\"view-files\"]')) {\n                        const componentId = target.getAttribute('data-component');\n                        viewFiles(componentId);\n                    }\n                });\n\n                // Close editor button\n                document.getElementById('closeEditorBtn').addEventListener('click', closeComponent);\n\n                // File tree is now populated dynamically in openComponent function\n\n                console.log('üé® Wave Reader Editor initialized successfully!');\n            });\n        </script>\n    </body>\n    </html>\n  `;\n  \n  // Process the template to remove JSX and handle variables\n  // Temporarily disable template processing to debug the structure\n  // const processedTemplate = TemplateProcessor.renderComponentTemplate(template, 'Wave Reader');\n  // res.send(processedTemplate);\n  \n  // Send the raw template for now to debug the structure\n  res.send(template);\n});\n\n// Error handling middleware\napp.use((error: any, req: express.Request, res: express.Response, next: express.NextFunction) => {\n  console.error('Editor server error:', error);\n  \n  res.status(500).json({\n    error: 'Internal server error',\n    message: process.env.NODE_ENV === 'development' ? error.message : 'Something went wrong'\n  });\n});\n\n// 404 handler\napp.use('*', (req, res) => {\n  res.status(404).json({\n    error: 'Endpoint not found',\n    path: req.originalUrl,\n    availableEndpoints: [\n      'GET /health',\n      'GET /api/editor/status',\n      'GET /api/pact/features',\n      'GET /api/pact/backend',\n      'GET /api/tracing/status',\n      'POST /api/tracing/message',\n      'GET /api/tracing/message/:messageId',\n      'GET /api/tracing/trace/:traceId',\n      'GET /api/tracing/generate'\n    ]\n  });\n});\n\n// Start server\nasync function startServer() {\n  try {\n    // Start listening\n    app.listen(EDITOR_CONFIG.port, () => {\n      console.log(`üöÄ TomeConnector Editor Server running on port ${EDITOR_CONFIG.port}`);\n      console.log(`üîç Health check at http://localhost:${EDITOR_CONFIG.port}/health`);\n      console.log(`üéõÔ∏è  Editor status at http://localhost:${EDITOR_CONFIG.port}/api/editor/status`);\n      console.log(`‚öôÔ∏è  Pact features at http://localhost:${EDITOR_CONFIG.port}/api/pact/features`);\n      console.log(`üîç Tracing at http://localhost:${EDITOR_CONFIG.port}/api/tracing/status`);\n    });\n  } catch (error) {\n    console.error('Failed to start editor server:', error);\n    process.exit(1);\n  }\n}\n\n// Export for testing\nexport { app, startServer, robotCopy };\n\n// Start server if this file is run directly\nif (import.meta.url === `file://${process.argv[1]}`) {\n  startServer();\n}\n"],"names":[],"mappings":"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","x_google_ignoreList":[2]}